{% extends "base.html" %}
{% block title %}Manual Entry{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
  <h2 class="text-3xl font-bold mb-6 text-gray-800">üìù Manual Survey Entry</h2>

  <!-- Flash message -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mb-4">
        {% for category, message in messages %}
          <div class="p-3 rounded text-white font-medium
            {% if category == 'success' %}bg-green-500{% else %}bg-red-500{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="post" class="bg-white p-6 rounded-lg shadow-md grid grid-cols-1 md:grid-cols-2 gap-6">

    {% set options = {
      "AgeGroup": ["20‚Äì30", "31‚Äì40", "41‚Äì50", "51+"],
      "Gender": ["Male", "Female"],
      "MaritalStatus": ["Single", "With Dependents", "Married"],
      "Occupation": ["Private Sector Employee", "Government Employee", "Business Owner / Entrepreneur", "Overseas Filipino Worker(OFW)", "Other"],
      "Income": ["Below ‚Ç±20,000", "‚Ç±20,001‚Äì‚Ç±50,000", "‚Ç±50,001 and above"],
      "LoanType": ["Bank Loan", "PAG-IBIG Housing Loan", "In-House Financing", "Adjustable-Rate Mortgage", "Fixed-Rate Mortgage"],
      "LoanAmount": ["Below ‚Ç±500,000", "‚Ç±500,001‚Äì‚Ç±1,000,000", "Above ‚Ç±1,000,000"],
      "LoanTerm": ["Short-term (<10 years)", "Medium-term (10‚Äì20 years)", "Long-term (>20 years)"],
      "Amortization": ["‚Ç±‚Ç±10,000", "‚Ç±10,001‚Äì‚Ç±20,000", "‚Ç±20,001‚Äì‚Ç±30,000", "Above ‚Ç±30,000"],
      "Downpayment": ["Personal Savings", "Loan from another source", "Family / Relatives Assistant", "Other"],
      "PropertyType": ["Apartment / Townhouse", "Condominium", "House & Lot", "Other"],
      "Location": ["Urban", "Suburban", "Rural"],
      "Purpose": ["Residential / Personal Use", "Rental Income", "Future Resale / Investment", "Vacation / Secondary Home"],
      "Reason": ["Property value appreciation (resale profit)", "Rental income Generation", "Family Housing Needs", "Long-term financial security", "Other"],
      "Satisfaction": ["Very Satisfied", "Satisfied", "Neutral", "Unsatisfied", "Very Unsatisfied"],
      "FuturePlan": ["Yes, within 1-3 years","Yes, within 5 years", "Yes, within 5‚Äì10 years", "No immediate plans", "None"]
    } %}

    {% for field, opts in options.items() %}
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">{{ field }}</label>
        <select name="{{ field }}" class="w-full border p-2 rounded" required>
          <option value="">-- Select --</option>
          {% for opt in opts %}
            <option value="{{ opt }}">{{ opt }}</option>
          {% endfor %}
        </select>
      </div>
    {% endfor %}

    <!-- Likert Section -->
    <div class="col-span-2 mt-4">
      <h3 class="text-lg font-semibold mb-3">üìä Importance of Factors (1 = Not Important, 5 = Very Important)</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {% for factor in ["Factor_Interest","Factor_Reputation","Factor_Location","Factor_Property","Factor_Amortization","Factor_Rental"] %}
          <div>Investment
            <label class="block text-sm font-medium text-gray-700 mb-1">{{ factor }}</label>
            <select name="{{ factor }}" class="w-full border p-2 rounded" required>
              <option value="">-- Select --</option>
              {% for i in range(1,6) %}
                <option value="{{ i }}">{{ i }}</option>
              {% endfor %}
            </select>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- Submit -->
    <div class="col-span-2 flex justify-end mt-4">
      <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow">üíæ Save Entry</button>
    </div>

  </form>
</div>
{% endblock %}
